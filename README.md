# ATM Design and Implementation

Secure ATM-Bank System (Design & Implementation)

A secure, distributed banking system implemented in C that simulates an ATM, a Bank server, and a Network Router. This project focuses on designing a custom application-layer protocol to ensure the confidentiality, integrity, and authenticity of financial transactions over an insecure network.

## Purpose

üìå Project OverviewThe goal of this project was to build a functional ATM/Bank system that is resilient against an active network adversary. The system assumes a "dolev-yao" style threat model where the attacker controls the network router and can inspect, modify, drop, or duplicate any packet sent between the ATM and the Bank.Key Objectives:Design a custom cryptographic protocol using OpenSSL.Implement the system in C using raw TCP/UDP sockets.Secure the system against specific attacks (Replay, Man-in-the-Middle, Manipulation).Audit and exploit vulnerabilities in other implementation (Red Team phase).üõ†Ô∏è System ArchitectureThe system consists of three distinct programs that communicate via local sockets:init: A utility to generate the initial state (cryptographic keys, user files) for the Bank and ATM.bank: The server maintaining user balances and processing transactions.atm: The client interface for users to log in and perform withdrawals.router: A malicious middleman component used to simulate network attacks (packet sniffing, dropping, replaying).üîê Security Protocol FeaturesTo defeat the threat model, the custom protocol implements:Confidentiality: All packet payloads are encrypted using AES-256-CBC with randomized Initialization Vectors (IVs).Integrity: A "Encrypt-then-MAC" scheme is used with HMAC-SHA256 to prevent tampering.Authentication: Mutual authentication between ATM and Bank using pre-shared secrets generated by init.Replay Protection: Monotonic sequence numbers (nonces) are tracked to prevent attackers from replaying valid withdrawal requests.üöÄ Getting StartedPrerequisitesGCC CompilerMakeOpenSSL Development Libraries (libssl-dev)Linux/Unix Environment (or Docker)Build InstructionsThe project includes a Makefile to automate compilation.Bash# Clean previous builds
make clean

# Compile all components (atm, bank, router, init)
make
Executables will be placed in the bin/ directory.Running the SimulationYou will need three separate terminal windows to run the full system.Step 1: InitializationGenerate the secret key files (test.bank and test.atm).Bash./bin/init test
Step 2: Start the NetworkTerminal 1 (Router):Bash./bin/router
Step 3: Start the BankTerminal 2 (Bank):Bash./bin/bank test.bank
Step 4: Start the ATMTerminal 3 (ATM):Bash./bin/atm test.atm
UsageOnce the system is running:Create a User (Bank Terminal): create-user [name] [pin] [balance]Example: create-user Alice 1234 1000Login (ATM Terminal): begin-session [name]Transact (ATM Terminal): withdraw [amount] or balanceüõ°Ô∏è Threat Model & DefenseThe protocol was explicitly designed to counter the following 5 specific attack vectors:Attack VectorCountermeasurePacket SniffingAES-256 Encryption ensures payloads are unreadable.Payload TamperingHMAC-SHA256 signature verification fails if any bit is flipped.Replay AttacksSequence numbers are tracked; the Bank rejects "old" packets.PIN TheftPINs are hashed before transmission and never stored in plaintext.SpoofingMutual authentication using unique shared secrets per session.‚ö†Ô∏è DisclaimerThis code was developed for an academic security capstone. While it implements standard cryptographic primitives, it is a simulation and should not be used for real-world financial systems.
