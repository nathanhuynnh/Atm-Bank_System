# Secure ATM-Bank System (Design & Implementation)

A secure, distributed banking system implemented in **C** that simulates an ATM, a Bank server, and a Network Router. This project focuses on designing a custom application-layer protocol to ensure the confidentiality, integrity, and authenticity of financial transactions over an insecure network.

**Project Status:** Completed (Design, Implementation, & Security Audit)

## üìå Project Overview

The goal of this project was to build a functional ATM/Bank system that is resilient against an active network adversary. The system assumes a "Dolev-Yao" style threat model where the attacker controls the network router and can inspect, modify, drop, or duplicate any packet sent between the ATM and the Bank.

**Key Objectives:**
* **Design** a custom cryptographic protocol using OpenSSL.
* **Implement** the system in C using raw TCP/UDP sockets.
* **Secure** the system against specific attacks (Replay, Man-in-the-Middle, Manipulation).
* **Audit** and exploit vulnerabilities in a third-party implementation (Red Team phase).

## üõ†Ô∏è System Architecture

The system consists of three distinct programs that communicate via local sockets:

* **`init`**: A utility to generate the initial state (cryptographic keys, user files) for the Bank and ATM.
* **`bank`**: The server maintaining user balances and processing transactions.
* **`atm`**: The client interface for users to log in and perform withdrawals.
* **`router`**: A malicious middleman component used to simulate network attacks (packet sniffing, dropping, replaying).

### üîê Security Protocol Features

To defeat the threat model, the custom protocol implements:

* **Confidentiality:** All packet payloads are encrypted using **AES-256-CBC** with randomized Initialization Vectors (IVs).
* **Integrity:** An "Encrypt-then-MAC" scheme is used with **HMAC-SHA256** to prevent tampering.
* **Authentication:** Mutual authentication between ATM and Bank using pre-shared secrets generated by `init`.
* **Replay Protection:** Monotonic sequence numbers (nonces) are tracked to prevent attackers from replaying valid withdrawal requests.

## üöÄ Getting Started

### Prerequisites
* GCC Compiler
* Make
* OpenSSL Development Libraries (`libssl-dev`)
* Linux/Unix Environment (or Docker)

### Build Instructions
The project includes a `Makefile` to automate compilation.

```bash
# Clean previous builds
make clean

# Compile all components (atm, bank, router, init)
make
